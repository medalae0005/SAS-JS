<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Catalogue</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    .card {
      border: 1px solid #ccc; border-radius: 10px;
      padding: 10px; margin-bottom: 10px;
      background-color: #f9f9f9;
    }
    button { margin: 5px; }
    a { display: inline-block; margin-bottom: 20px; text-decoration: none; color: blue; }
  </style>
</head>
<body>

  <h1>Catalogue des livres</h1>
  <a href="ajouter-livre.html">➕ Ajouter un livre</a>

  <div id="books"></div>

  <script>
    const bibliotheque = [
      { code: 12, titre: "Clean Code", auteur: "Robert C. Martin", annee: 2008, disponible: true, prix: 150 },
      { code: 45, titre: "Eloquent JavaScript", auteur: "Marijn Haverbeke", annee: 2018, disponible: true, prix: 200 },
    ];

    const booksDiv = document.getElementById("books");

    function afficherCatalogue() {
      booksDiv.innerHTML = "";
      bibliotheque.forEach(livre => afficherLivre(livre));
    }

    function afficherLivre(livre) {
      let card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <h3>${livre.titre}</h3>
        <p>Auteur: ${livre.auteur}</p>
        <p>Année: ${livre.annee}</p>
        <p>Prix: ${livre.prix} DH</p>
      `;

      let btnReserve = document.createElement("button");
      btnReserve.textContent = livre.disponible ? "Réserver" : "Réservé";
      btnReserve.disabled = !livre.disponible;

      btnReserve.addEventListener("click", () => {
        livre.disponible = false;
        btnReserve.textContent = "Réservé";
        btnReserve.disabled = true;
      });

      let btnRetour = document.createElement("button");
      btnRetour.textContent = "Annuler réservation";
      btnRetour.addEventListener("click", () => {
        livre.disponible = true;
        btnReserve.textContent = "Réserver";
        btnReserve.disabled = false;
      });

      let btnSupprimer = document.createElement("button");
      btnSupprimer.textContent = "Supprimer";
      btnSupprimer.addEventListener("click", () => {
        supprimerLivre(livre.code);
      });

      card.appendChild(btnReserve);
      card.appendChild(btnRetour);
      card.appendChild(btnSupprimer);
      booksDiv.appendChild(card);
    }

    function supprimerLivre(code) {
      const index = bibliotheque.findIndex(l => l.code === code);
      if (index !== -1) {
        bibliotheque.splice(index, 1);
        afficherCatalogue();
      }
    }

    afficherCatalogue();
  </script>

</body>
</html>